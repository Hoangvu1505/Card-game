<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Casino Cam-pu-chia =))</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.0/socket.io.min.js"></script>
</head>
<body>

    <div id="winner-overlay">
        <div class="winner-box">
            <div class="winner-title">üèÜ NG∆Ø·ªúI CHI·∫æN TH·∫ÆNG üèÜ</div>
            <div id="winner-name-display" class="winner-name">T√™n ng∆∞·ªùi th·∫Øng</div>
            <div id="winner-message">Ch√∫c m·ª´ng! B·∫°n ƒë√£ ch∆°i r·∫•t hay.</div>
            <br>
            <button class="btn-green" style="font-size: 20px; padding: 15px 30px;" onclick="closeWinnerPopup()">ƒê√≥ng & Ch∆°i Ti·∫øp</button>
        </div>
    </div>

    <div id="home-screen" class="screen active">
        <img src="https://media.giphy.com/media/GeimqsH0TLDt4tScGw/giphy.gif" class="funny-gif floating" style="bottom: 10px; left: 10px; width: 150px;">
        <img src="https://ss-images.saostar.vn/2018/12/31/4357621/tenor.gif" class="funny-gif" style="top: 20px; right: 20px; width: 120px;">
        
        <h1>üòùüòù‚ô†Ô∏è CASINO Cam-pu-chia ‚ô£Ô∏èüòè</h1>
        <div style="margin: 20px 0;">
            <label for="username" style="font-size: 18px; font-weight: bold; margin-right: 10px;">Nh·∫≠p t√™n c·ªßa b·∫°n:</label>
            <input type="text" id="username" placeholder="Nh·∫≠p t√™n b·∫°n" value="Player 1" style="padding: 10px; border-radius: 5px; border: none; font-size: 16px; color: #333; width: 200px;">
        </div>
        
        <div class="home-grid">
            <div class="game-card">
                <h2>X√¨ D√°ch</h2>
                <p>Ch·ªâ ƒë√°nh v·ªõi m√°y</p>
                <button class="btn-main" onclick="startBlackjack()">Ch∆°i Ngay</button>
            </div>
            <div class="game-card">
                <h2>Ti·∫øn L√™n MN</h2>
                <p>Bot & Online</p>
                <button class="btn-main" onclick="showTLMNMenu()">Ch∆°i ngay</button>
            </div>
            <div class="game-card" style="opacity: 0.5;">
                <h2>Poker</h2>
                <p>(Demo - Ch∆∞a c√≥)</p>
                <button class="btn-main" disabled>S·∫Øp ra m·∫Øt</button>
            </div>
            <div class="game-card" style="background: #e67e22;">
                <h2>C·ªù Caro</h2>
                <p>X vs O (5 Win)</p>
                <button class="btn-main" onclick="showCaroMenu()">Ch∆°i ngay</button>
            </div>
        </div>
    </div>

    <div id="tlmn-lobby" class="screen">
        <button class="btn-back" onclick="goHome()">‚¨Ö Quay l·∫°i</button>
        <h2>S·∫£nh Ti·∫øn L√™n</h2>
        <div style="display: flex; justify-content: center; gap: 20px;">
            <div style="width: 300px; border-right: 1px solid #555; padding-right: 20px;">
                <h3>Ch∆°i Nhanh</h3>
                <button class="btn-main btn-green" onclick="createTLMN('bot')">ƒê√°nh v·ªõi M√°y</button>
                <br>
                <button class="btn-main btn-green" onclick="createTLMN('multi')">T·∫°o Ph√≤ng Online</button>
                <br>
                <input type="text" id="room-code-input" placeholder="M√£ ph√≤ng" style="width: 100px; padding: 8px;">
                <button class="btn-join" onclick="joinByCode()">V√†o</button>
            </div>
            <div style="width: 400px;">
                <h3>Danh s√°ch ph√≤ng online</h3>
                <div id="room-list">ƒêang t·∫£i...</div>
            </div>
        </div>
    </div>
    
    <div id="caro-lobby" class="screen">
        <button class="btn-back" onclick="goHome()">‚¨Ö Quay l·∫°i</button>
        <h2 style="color: #e67e22;">C·ªù Caro</h2>
        
        <div style="display: flex; justify-content: center; gap: 20px;">
            <div style="width: 300px; border-right: 1px solid #555; padding-right: 20px;">
                <h3>Ch∆°i Nhanh</h3>
                <button class="btn-main btn-green" onclick="createCaro('bot')">ƒê·∫•u v·ªõi M√°y</button>
                <br>
                <button class="btn-main btn-green" onclick="createCaro('multi')">T·∫°o Ph√≤ng Online</button>
                <br>
                <div style="margin-top: 10px;">
                    <input type="text" id="caro-code-input" placeholder="M√£ ph√≤ng" style="padding: 10px; width: 120px; border-radius: 5px; border: none;">
                    <button class="btn-join" onclick="joinCaroByInput()">V√†o</button>
                </div>
            </div>

            <div style="width: 400px;">
                <h3>Danh s√°ch ph√≤ng</h3>
                <div id="caro-room-list">
                    <p style="opacity: 0.7;">(Ch·ª©c nƒÉng danh s√°ch ƒëang c·∫≠p nh·∫≠t...)</p>
                    <p>H√£y d√πng "M√£ ph√≤ng" ƒë·ªÉ m·ªùi b·∫°n b√®.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="caro-game" class="screen">
        <button class="btn-back" onclick="leaveRoom('caro')">‚¨Ö Tho√°t</button>
        <h2 id="caro-status" style="margin-top: 0;">C·ªù Caro - Ph√≤ng: <span id="caro-rid"></span></h2>
        
        <button class="chat-btn" style="top: 60px; right: 20px;" onclick="toggleCaroChat()">üí¨</button>

        <div style="display: flex; justify-content: center; align-items: flex-end; gap: 0px; margin-top: 20px;">
            <div id="wrapper-x" style="position: relative; text-align: center; padding-bottom: 50px; margin-right: 10px;">
                <div class="chat-bubble" style="bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 100; white-space: nowrap;"></div> 
                <div id="player-x" style="padding: 15px; border: 3px solid white; border-radius: 15px; width: 130px; background: #2c3e50; font-weight: bold; font-size: 16px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
                    X: Ch·ªù...
                </div>
            </div>

            <div id="caro-board"></div>
            
            <div id="wrapper-o" style="position: relative; text-align: center; padding-bottom: 50px; margin-left: 10px;">
                <div class="chat-bubble" style="bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 100; white-space: nowrap;"></div> 
                <div id="player-o" style="padding: 15px; border: 3px solid white; border-radius: 15px; width: 130px; background: #2c3e50; font-weight: bold; font-size: 16px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);">
                    O: Ch·ªù...
                </div>
            </div>
        </div>

        <div id="caro-controls" style="text-align: center; margin-top: -90px; display: none; position: relative; z-index: 100;">
            <button class="btn-green" style="font-size: 18px; padding: 10px 30px;" onclick="socket.emit('caro_restart')">üîÑ V√ÅN M·ªöI</button>
        </div>

        <div id="caro-chat-popup" class="chat-popup" style="display: none; position: absolute; bottom: 100px; right: 20px; width: 300px; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 10px; grid-template-columns: repeat(4, 1fr); gap: 8px; z-index: 999; border: 2px solid #f1c40f;">
            <div class="chat-input-row">
                <input type="text" id="caro-chat-msg" placeholder="Nh·∫≠p tin nh·∫Øn..." onkeydown="checkCaroEnter(event)">
                <button onclick="sendCaroText()">G·ª≠i</button>
            </div>
            <div class="sticker-item" onclick="sendCaroChat('text', 'üòÇ')">üòÇ</div>
            <div class="sticker-item" onclick="sendCaroChat('text', 'üò°')">üò°</div>
            <div class="sticker-item" onclick="sendCaroChat('text', 'üò≠')">üò≠</div>
            <div class="sticker-item" onclick="sendCaroChat('text', 'üòé')">üòé</div>
            <div class="sticker-item" onclick="sendCaroChat('text', '‚è≥')">‚è≥</div>
            <div class="sticker-item" onclick="sendCaroChat('text', 'üòè')">üòè</div>
            <div class="sticker-item" onclick="sendCaroChat('text', 'Nhanh l√™n m√°!')">nhanh l√™n m√°!</div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media.giphy.com/media/GeimqsH0TLDt4tScGw/giphy.gif')"><img src="https://media.giphy.com/media/GeimqsH0TLDt4tScGw/giphy.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media.giphy.com/media/H5C8CevNMbpBqNqFjl/giphy.gif')"><img src="https://media.giphy.com/media/H5C8CevNMbpBqNqFjl/giphy.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://ss-images.saostar.vn/2018/12/31/4357621/tenor.gif')"><img src="https://ss-images.saostar.vn/2018/12/31/4357621/tenor.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media1.tenor.com/m/wzDpyUZ3_xQAAAAC/hello-%E4%BD%A0%E5%A5%BD.gif')"><img src="https://media1.tenor.com/m/wzDpyUZ3_xQAAAAC/hello-%E4%BD%A0%E5%A5%BD.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media.tenor.com/EX6You2MNyUAAAAM/chowyunfat-godofgamblers.gif')"><img src="https://media.tenor.com/EX6You2MNyUAAAAM/chowyunfat-godofgamblers.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media1.tenor.com/m/-z_M-8I9ULYAAAAd/stephen-chow-dewa-judi.gif')"><img src="https://media1.tenor.com/m/-z_M-8I9ULYAAAAd/stephen-chow-dewa-judi.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWN0MHd0ZWc2NzIwNGVmNHh3MzJsdG1qMzF4aXh6M2dvOW5laHloOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d9A3OAEoPMsSEMcRPy/giphy.gif')"><img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWN0MHd0ZWc2NzIwNGVmNHh3MzJsdG1qMzF4aXh6M2dvOW5laHloOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d9A3OAEoPMsSEMcRPy/giphy.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNzZwMG9pcTN0ZzF6M28xaXV0cndpeGhmb3B2ODltcGQ4M2pheXF1dyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/R312C3MEVg4SCYAber/giphy.gif')"><img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNzZwMG9pcTN0ZzF6M28xaXV0cndpeGhmb3B2ODltcGQ4M2pheXF1dyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/R312C3MEVg4SCYAber/giphy.gif"></div>
            <div class="sticker-item" onclick="sendCaroChat('image', 'https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ203Nzh0MzdobHhwcXNseWgxbjRmaTE3azdmYWxtemNsaDhqY2J1NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KFuXeADlsfCFCoxfUB/giphy.gif')"><img src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ203Nzh0MzdobHhwcXNseWgxbjRmaTE3azdmYWxtemNsaDhqY2J1NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KFuXeADlsfCFCoxfUB/giphy.gif"></div>
        </div>
    </div>

    <div id="tlmn-game" class="screen">
        <div style="position: absolute; top: 10px; left: 10px;">
            <button class="btn-red" onclick="leaveRoom('tlmn')">R·ªùi ph√≤ng</button>
            <span id="rid-display" style="margin-left: 10px; font-weight: bold; color: yellow;"></span>
        </div>
        
        <div id="tlmn-table">
            <div class="seat seat-0" id="seat-0"></div>
            <div class="seat seat-1" id="seat-1"></div>
            <div class="seat seat-2" id="seat-2"></div>
            <div class="seat seat-3" id="seat-3"></div>
            <div id="chat-popup">
                <div class="chat-input-row">
                    <input type="text" id="chat-msg" placeholder="Nh·∫≠p tin nh·∫Øn..." onkeydown="checkEnter(event)">
                    <button onclick="sendText()">G·ª≠i</button>
                </div>
                <div class="sticker-item" onclick="sendChat('text', 'üòÇ')">üòÇ</div>
                <div class="sticker-item" onclick="sendChat('text', 'üò°')">üò°</div>
                <div class="sticker-item" onclick="sendChat('text', 'üò≠')">üò≠</div>
                <div class="sticker-item" onclick="sendChat('text', 'üòé')">üòé</div>
                <div class="sticker-item" onclick="sendChat('text', '‚è≥')">‚è≥</div>
                <div class="sticker-item" onclick="sendChat('text', 'üòè')">üòè</div>
                <div class="sticker-item" onclick="sendChat('text', 'Nhanh l√™n m√°!')">nhanh l√™n m√°!</div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media.giphy.com/media/GeimqsH0TLDt4tScGw/giphy.gif')"><img src="https://media.giphy.com/media/GeimqsH0TLDt4tScGw/giphy.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media.giphy.com/media/H5C8CevNMbpBqNqFjl/giphy.gif')"><img src="https://media.giphy.com/media/H5C8CevNMbpBqNqFjl/giphy.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://ss-images.saostar.vn/2018/12/31/4357621/tenor.gif')"><img src="https://ss-images.saostar.vn/2018/12/31/4357621/tenor.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media1.tenor.com/m/wzDpyUZ3_xQAAAAC/hello-%E4%BD%A0%E5%A5%BD.gif')"><img src="https://media1.tenor.com/m/wzDpyUZ3_xQAAAAC/hello-%E4%BD%A0%E5%A5%BD.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media.tenor.com/EX6You2MNyUAAAAM/chowyunfat-godofgamblers.gif')"><img src="https://media.tenor.com/EX6You2MNyUAAAAM/chowyunfat-godofgamblers.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media1.tenor.com/m/-z_M-8I9ULYAAAAd/stephen-chow-dewa-judi.gif')"><img src="https://media1.tenor.com/m/-z_M-8I9ULYAAAAd/stephen-chow-dewa-judi.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWN0MHd0ZWc2NzIwNGVmNHh3MzJsdG1qMzF4aXh6M2dvOW5laHloOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d9A3OAEoPMsSEMcRPy/giphy.gif')"><img src="https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWN0MHd0ZWc2NzIwNGVmNHh3MzJsdG1qMzF4aXh6M2dvOW5laHloOCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d9A3OAEoPMsSEMcRPy/giphy.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNzZwMG9pcTN0ZzF6M28xaXV0cndpeGhmb3B2ODltcGQ4M2pheXF1dyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/R312C3MEVg4SCYAber/giphy.gif')"><img src="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExNzZwMG9pcTN0ZzF6M28xaXV0cndpeGhmb3B2ODltcGQ4M2pheXF1dyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/R312C3MEVg4SCYAber/giphy.gif"></div>
                <div class="sticker-item" onclick="sendChat('image', 'https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ203Nzh0MzdobHhwcXNseWgxbjRmaTE3azdmYWxtemNsaDhqY2J1NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KFuXeADlsfCFCoxfUB/giphy.gif')"><img src="https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ203Nzh0MzdobHhwcXNseWgxbjRmaTE3azdmYWxtemNsaDhqY2J1NyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KFuXeADlsfCFCoxfUB/giphy.gif"></div>
            </div>
            <div id="table-center"></div>
        </div>

        <div id="game-controls" style=" display: none;">
            <button class="btn-green" onclick="tlmnAction('play')">ƒê√ÅNH B√ÄI</button>
            <button class="btn-red" onclick="tlmnAction('pass')">B·ªé L∆Ø·ª¢T</button>
        </div>
        <button id="btn-start" class="btn-green" style="margin-top: 10px; display: none;" onclick="socket.emit('tlmn_start_game')">B·∫ÆT ƒê·∫¶U</button>
    </div>

    <div id="blackjack-game" class="screen">
        <button class="btn-back" onclick="leaveRoom('blackjack')">‚¨Ö Tho√°t</button>
        <h1>X√¨ D√°ch (Blackjack)</h1>
        <div class="bj-area">
            <h3>üëë Nh√† C√°i (M√°y)</h3>
            <div id="bj-dealer-cards"></div>
            <div id="bj-dealer-score">ƒêi·ªÉm: ?</div>
        </div>
        <br>
        <div class="bj-area">
            <h3>üë§ B·∫°n</h3>
            <div id="bj-my-cards"></div>
            <div id="bj-my-score">ƒêi·ªÉm: 0</div>
            <div id="bj-controls" style="display:none; margin-top: 15px;">
                <button class="btn-yellow" onclick="bjAction('hit')">R√öT B√ÄI</button>
                <button class="btn-red" onclick="bjAction('stand')">D·∫∞N (TH√îI)</button>
            </div>
            <button id="bj-btn-start" class="btn-green" onclick="startBlackjack()" style="display:none; margin-top:15px;">CHIA B√ÄI L·∫†I</button>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/tienlen.js"></script>
    <script src="/static/js/caro.js"></script>
</body>
</html>